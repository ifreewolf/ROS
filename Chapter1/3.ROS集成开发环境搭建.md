# 1 vscode 使用和基本配置
## 1.1 创建ROS工作空间
```shell
mkdir -p xxx_ws/src # 必须有src
cd xxx_ws
catkin_make
```

## 1.2 启动vscode
```shell
cd xxx_ws
code .
```

## 1.3 vscode中编译ros
快捷键 ctrl+shift+B 调用编译，选择：catkin_make:build
可以点击配置设置为默认，修改 .vscode/tasks.json 文件
```json
{
	// 有关 tasks.json 格式的文档，请参见
	// https://go.microsoft.com/fwlink/?LinkId=733558
	"version": "2.0.0",
	"tasks": [
		{
			"label": "catkin_make:debug",	// 代表提示的描述性信息
			"type": "shell",	// 可以选择 shell 或者 process， 如果是 shell 代码是在 shell 里面运行一个命令，如果是 process 代表作为一个进程来运行
			"command": "catkin_make",	// 这个是需要运行的命令
			"args": [],	// 如果需要在命令后面加一些后缀，可以写在这里，比如-DCATKIN_WHITELIST_PACKAGES="pac1;pac2"
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"presentation": {
				"reveal": "always"	// 可选always或者silence，代表是否输出信息
			},
			"problemMatcher": "$msCompile"
		}
	]
}
```
保存上述文件之后，快捷键 ctrl+shift+B 即可对当前工程进行编译，相当于在终端输入命令：
```shell
catkin_make
```
## 1.4 创建 ROS 功能包
选定 src 右击 ---> 选择 create catkin package 输入包名 回车，再输入 依赖 回车；
整个流程类似于命令：
```shell
catkin_create_pkg hello_vscode roscpp rospy std_msgs
```

## 1.5 C++实现
在功能包的src下新建 cpp 文件
```cpp
#include "ros/ros.h"

int main(int argc, char* argv[]) {
    ros::init(argc, argv, "hello");
    ROS_INFO("hello");
    return 0;
}
```
在输入过程，可能出现没有代码提示的情况，修改 .vscode/c_cpp_properties.json

设置 "cppStandard":"c++17"， 从gnu17改为c++17

但是在ubuntu20, ros版本noetic的情况下，配置项cppStandard默认为c++14，并且修改为c++17后依然不会有代码提示。

这个时候，可以尝试修改配置项"cStandard": "c11", 从gnu11改为c11

<span style="color:red"><b>main函数的参数不可以被const修饰</b></span>

<span style="color:red"><b>当ROS_INFO终端输出有中文时，会出现乱码</b></span>

INFO:????????????????????????

解决办法：在函数开头加入下面代码的任意一句
```cpp
setlocale(LC_CTYPE, "zh_CN.utf8");
setlocale(LC_ALL, "")
```
是在main函数里面的开头输入上面的任意一句，如下：
```cpp
int main(int argc, char* argv[]) {
    // setlocale(LC_CTYPE, "zh_CN.utf8");
    setlocale(LC_ALL, "");
    ros::init(argc, argv, "hello");
    ROS_INFO("hello, 你好ros");
    return 0;
}
```

