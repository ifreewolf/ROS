# 2.3 参数服务器

参数服务器在ROS中主要用于实现不同节点之间的数据共享。参数服务器相当于是独立于所有节点的一个公共容器，可以将数据存储在该容器中，被不同的节点调用，当然不同的节点也可以往其中存储数据，关于参数服务器的典型应用场景如下：

>导航实现时，会进行路径规划，比如：全局路径规划，设计一个从出发点到目标点的大致路径。本地路径规划，会根据当前路况生成实时的行进路径。

上述场景中，全局路径规划和本地路径规划时，就会使用到参数服务器：

- 路径规划时，需要参考小车的尺寸，我们可以将这些尺寸信息存储到参数服务器，全局路径规划节点与本地路径规划节点都可以从参数服务器中调用这些参数。

参数服务器，一般适用于存在数据数据共享的一些应用场景。

<B>概念</B>

以共享的方式实现不同节点之间数据交互的通信模式。

<B>作用</B>

存储一些多节点共享的数据，类似于全局变量。

<B>案例</B>

实现参数增删改查操作。

## 2.3.1 参数服务器理论模型

参数服务器实现是最为简单的，该模型如下图所示，该模型中涉及到三个角色：

- ROS Master （管理者）
- Talker (参数设置者)
- Listener (参数调用者)

ROS Master作为一个公共容器保存参数，Talker可以向容器中设置参数，Listener可以获取参数。

<div align=center>
    <img src="./image/03ROS通信机制03_参数服务器.jpg" />
</div>

整个流程由以下步骤实现：

### 1.Talker设置参数

Talker通过RPC向参数服务器发送参数(包括参数名与参数值)，ROS Master将参数保存到参数列表中。

### 2.Listener获取参数

Listener通过RPC向参数服务器发送参数查找请求，请求中包含要查找的参数名。

### 3.ROS Master向Listener发送参数值

ROS Master根据步骤2请求提供的参数名查找参数值，并将查询结果通过RPC发送给Listener。

---

<B>参数可使用数据类型</B>

- 32-bit integers
- booleans
- strings
- doubles
- iso8601 dates
- lists
- base64-encoded binary data
- 字典

>注意：参数服务器不是为高性能而设计的，因此最好用于存储静态的非二进制的简单数据。

## 2.3.2 参数操作A(C++)

<B>需求：</B>实现参数服务器参数的增删改查操作。

在C++中实现参数服务器数据的增删改查，可以通过两套API实现：

- ros::NodeHandle
- ros::param

下面为具体操作演示

### 1. 参数服务器新增(修改)参数

### 2. 参数服务器获取参数

### 3. 参数服务器删除参数


## 2.3.3 参数操作B(Python)